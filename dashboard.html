<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<script src='../dist/index.global.js'></script>
<script src="main.js" defer></script>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="sidebar.css">

<script>

document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {
    timeZone: 'local',
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,dayGridWeek'
    },
    events: [
        {
          title: 'Mein Event',
          start: '2023-03-16T10:00:00',
          end: '2023-03-17T12:00:00',
          color: '#378006',
          description: 'Eine Beschreibung meines Events'
        },
      ],
    initialDate: new Date(),
    navLinks: true, // can click day/week names to navigate views
    editable: true,
    businessHours: true, // display business hours
    dayMaxEvents: true, // allow "more" link when too many events
    selectable: true,
    weekNumbers: true,    
    eventClick: function(info) {
  
      

      document.getElementById('event-title2').value = info.event.title;
  document.getElementById('event-start-date2').value = info.event.start;
  document.getElementById('event-end-date2').value = info.event.end;
  document.getElementById('event-color2').value = info.event.backgroundColor;
  document.getElementById('event-description2').value = info.event.extendedProps.description;

  document.getElementById('event-form-clickevent').style.display = 'block';
  
},



  });
      // fetch events from Spring Boot API
      fetch('/events')
        .then(response => response.json())
        .then(events => {
            // add fetched events to the calendar
            calendar.addEventSource(events);
            console.log(events);
            
        });


  calendar.render();


  document.querySelector('.modal-btn2').addEventListener('click', function() {
    var id = document.getElementById('event-form-clickevent').value;
  var title = document.getElementById('event-title2').value;
  var start = document.getElementById('event-start-date2').value;
  var end = document.getElementById('event-end-date2').value;
  var color = document.getElementById('event-color2').value;
  var description = document.getElementById('event-description2').value;

  // Hier kannst du die Werte in einem Objekt speichern
  var eventData = {
    title: title,
    start: start,
    end: end,
    backgroundColor: color,
    description: description
  };

  // Hier kannst du die Werte ausgeben, um sicherzustellen, dass sie korrekt erfasst wurden
  console.log(eventData);

  // Hier kannst du den Event im Kalender aktualisieren
  var eventObj = {
    title: title,
    start: start,
    end: end,
    backgroundColor: color,
    description: description
  };

  // Verwende info.event.id, um das Event zu identifizieren
  calendar.getEventById(id).setProp('title', title);
  calendar.getEventById(id).setProp('start', start);
  calendar.getEventById(id).setProp('end', end);
  calendar.getEventById(id).setProp('backgroundColor', color);
  calendar.getEventById(id).setExtendedProp('description', description);

  // Hier kannst du das Modal schließen
  document.getElementById('event-form-clickevent').style.display = 'none';
});



  // Add event listener to "Create Event" button
  var addEventBtn = document.getElementById('add-event-btn');
  addEventBtn.addEventListener('click', function() {
    document.getElementById('event-form').style.display = 'block';
  });

    // Add event listener to "Close" button in the form
    var closeBtn = document.getElementsByClassName('close')[0];
  closeBtn.addEventListener('click', function() {
    document.getElementById('event-form').style.display = 'none';
  });
     // Add event listener to "Close" button in the form
     var closeBtn = document.getElementsByClassName('close2')[0];
  closeBtn.addEventListener('click', function() {
    document.getElementById('event-form-clickevent').style.display = 'none';
  });


  // Add event listener to form submission
  var form = document.querySelector('form');
  form.addEventListener('submit', function(event) {
    event.preventDefault();

    // Get form values
    var title = document.getElementById('event-title').value;
    var start = document.getElementById('event-start-date').value;
    var end = document.getElementById('event-end-date').value;
    var color = document.getElementById('event-color').value;
    var description = document.getElementById('event-description').value;

    // Create event object
    var eventObj = {
      title: title,
      start: start,
      end: end,
      color: color,
      extendedProps: {
        description: description
      }
    };

    // Add the event to the calendar
    calendar.addEvent(eventObj);

    // Reset the form
    form.reset();

    // Hide the form
    document.getElementById('event-form').style.display = 'none';
  });
});

</script>




<style>

body {
  
  padding: 0;
  font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
  font-size: 14px;
}

#calendar {
  width: 900px;
  margin: 0 auto;
}

/* Modal styles */
.modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
  background-color: #fefefe;
  margin: 10% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 50%;
}

.close, .close2 {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus,
.close2:hover,
.close2:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}


</style>
</head>
<body>
  <div class="main-page"> 
    <nav>
        <div class="userinfo-navbar">
            <img class="profilepicture-navbar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Solid_white.svg/2048px-Solid_white.svg.png">
            <p>Name of the user</p>
        </div>
        <div class="nav-items">
            <svg class="navbar-icon"xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l-2 0l9 -9l9 9l-2 0"></path><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path></svg>
            <a>Home</a>
        </div>
        <div class="nav-items">
            <svg class="navbar-icon" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-color-swatch" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M19 3h-4a2 2 0 0 0 -2 2v12a4 4 0 0 0 8 0v-12a2 2 0 0 0 -2 -2"></path><path d="M13 7.35l-2 -2a2 2 0 0 0 -2.828 0l-2.828 2.828a2 2 0 0 0 0 2.828l9 9"></path><path d="M7.3 13h-2.3a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h12"></path><path d="M17 17l0 .01"></path></svg>
            <a>Themenwahl</a>
        </div>
        <div class="nav-items">
        <svg class="navbar-icon" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-question-mark" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4"></path><path d="M12 19l0 .01"></path></svg>
            <a>IDK</a>
        </div>
        <div class="nav-items">
            <svg class="navbar-icon" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-question-mark" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4"></path><path d="M12 19l0 .01"></path></svg>
            <a>IDK2</a>
        </div>  
        </nav>
        <div class="main">
          
          <div id='calendar'></div>
          <button id="add-event-btn">+ Create Event</button>
          
          <div id="event-form" class="modal">
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2 class="modal-title">Create New Event</h2>
              <form class="modal-content-flex">
              <div class="modal-add-event">
                <label for="event-title">Title:</label>
                <input class="modal-input modal-title2" type="text" id="event-title" name="title" required>
              
                <label for="event-start-date">Start Date:</label>
                <input class="modal-input modal-start" type="date" id="event-start-date" name="start_date" required>
          
                <label class="modal-end-date-text" for="event-end-date">End Date:</label>
                <input class="modal-input modal-end" type="date" id="event-end-date" name="end_date" required>
              
             
                <label for="event-color">Color:</label>
                <input class="modal-input modal-color" type="color" id="event-color" name="color">
              
         
                <label for="event-description">Description:</label>
                <textarea class="modal-input modal-textarea" id="event-description" name="description"></textarea>
              </div>
                <button class="modal-btn" type="submit">Create</button>
              </form>
            </div>
          </div>


          <div id="event-form-clickevent" class="modal">
            <div class="modal-content">
              <span class="close2">&times;</span>
              <h2 class="modal-title">Event ändern</h2>
              <form class="modal-content-flex">
              <div class="modal-add-event">
                <label for="event-title">Title:</label>
                <input class="modal-input modal-title2" type="text" id="event-title2" name="title" required>
              
                <label for="event-start-date">Start Date:</label>
                <input class="modal-input modal-start" type="date" id="event-start-date2" name="start_date" required>
          
                <label class="modal-end-date-text" for="event-end-date">End Date:</label>
                <input class="modal-input modal-end" type="date" id="event-end-date2" name="end_date" required>
              
             
                <label for="event-color">Color:</label>
                <input class="modal-input modal-color" type="color" id="event-color2" name="color">
              
         
                <label for="event-description">Description:</label>
                <textarea class="modal-input modal-textarea" id="event-description2" name="description"></textarea>
              </div>
                <button class="modal-btn2" type="button">Ändern</button>
                <button class="modal-btn-delete" type="button" onclick="deleteEvent()">Delete</button>

              </form>
            </div>
          </div>



      
          
</div>
</body>
</html>